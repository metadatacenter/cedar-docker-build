FROM metadatacenter/cedar-microservice:2.7.13

ENV CEDAR_SERVER_NAME=terminology

ENV CEDAR_TERMINOLOGY_HTTP_PORT=9004
ENV CEDAR_TERMINOLOGY_ADMIN_PORT=9104
ENV CEDAR_TERMINOLOGY_STOP_PORT=9204

ENV LOGDIR=${CEDAR_HOME}/log/server-${CEDAR_SERVER_NAME}/
RUN mkdir -p ${LOGDIR}
VOLUME ${LOGDIR}

ENV CACHEDIR=${CEDAR_HOME}/cache/terminology/
RUN mkdir -p ${CACHEDIR}
VOLUME ${CACHEDIR}

ADD scripts/pre-docker-entrypoint.sh ${CEDAR_HOME}/

EXPOSE ${CEDAR_TERMINOLOGY_HTTP_PORT} ${CEDAR_TERMINOLOGY_ADMIN_PORT} ${CEDAR_TERMINOLOGY_STOP_PORT}

RUN ${CEDAR_HOME}/install_deps.sh
